<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ZCity</title>
	<style>
		@font-face {
			font-family: "Disket-Mono-Bold";
			src: url("../fonts/Disket-Mono-Bold.ttf");
		}

		body {
			background-color: rgb(8, 6, 10);
			display: flex;
			justify-content: center;
			overflow: hidden;
			height: 100vh;
			width: 100vw;
			margin: 0;
			padding: 0;
		}

		.text_1 {
			font-family: "Disket-Mono-Bold", sans-serif;
			font-weight: bold;
			font-size: 12vh;
			color: rgb(223, 46, 46);
			text-shadow: 3px 3px rgb(42, 28, 61);
			text-align: center;
		}
		
		#text_tips {
			font-family: 'Bahnschrift', sans-serif;
			font-size: 3vh;
			font-weight: lighter;
			font-stretch: extra-condensed;
			color: white;
			text-shadow: 2px 2px rgb(42, 28, 61);
			text-align: center;
			transition: opacity 1s ease-in-out;
			opacity: 1;
			display: block;
		}

		.info {
			font-family: 'Bahnschrift', sans-serif;
			font-size: 2.5vh;
			font-weight: lighter;
			font-stretch: extra-condensed;
			color: white;
			text-shadow: 2px 2px rgb(42, 28, 61);
			text-align: center;
		}
		
		.info-down {
			font-family: 'Bahnschrift', sans-serif;
			font-size: 2vh;
			font-weight: lighter;
			font-stretch: extra-condensed;
			color: rgb(155,155,155);
			position: absolute;
			top: 95%;
			left: 50%;
			transform: translateX(-50%);
		}

		.centertext {
			position: absolute;
			top: 40vh;
			left: 50%;
			transform: translateX(-50%);
			text-align: center;
			width: 100%;
			pointer-events: none;
		}

		.gradient {
			position: absolute;
			width: 105vw;
			height: 105vh;
			top: 0;
			left: 0;
			background: linear-gradient(0deg, rgba(94, 23, 23, 0.5) 5%, rgba(0, 0, 0, 0) 70%);
			pointer-events: none;
		}

		canvas {
			position: absolute;
			top: 0;
			left: 0;
			width: 105vw;
			height: 105vh;
			display: block;
		}
	</style>
</head>
<body>
	<!-- Фоновая музыка без UI -->
	<audio id="bg-music" loop preload="auto" style="display: none;">
		<source src="https://cdn.discordapp.com/attachments/123456789/background-music.mp3" type="audio/mpeg">
	</audio>

	<canvas id="grid"></canvas>
	<div class="gradient"></div>
	<div class="centertext">
		<span class="text_1">Z</span>
		<span class="text_1" style="color:white;">City</span>
		<div style="margin-top: -2vh;">
			<span class="info" id="info" style="font-weight: 500;">There is nothing for you... sorry :3</span>
			<br>
			<span class="info" id="map"></span>
			<br>
			<span id="text_tips" tip>Hey where tips?</span>
		</div>
	</div>
	<span class="info-down">zcity-help.ru</span>

	<script>
		// Canvas grid animation
		const canvas = document.getElementById('grid');
		const ctx = canvas.getContext('2d');
		
		canvas.width = window.innerWidth + 25;
		canvas.height = window.innerHeight + 25;
		
		const gridSize = 60;
		let offsetX = window.innerWidth;
		let offsetY = -window.innerHeight;
		const gridColor = 'rgba(99, 88, 104, 0.05)';
		
		function drawGrid() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			for (let x = offsetX % gridSize; x < canvas.width + gridSize; x += gridSize) {
				ctx.beginPath();
				ctx.moveTo(x, 0);
				ctx.lineTo(x, canvas.height);
				ctx.strokeStyle = gridColor;
				ctx.lineWidth = 2.5;
				ctx.stroke();
			}

			for (let y = offsetY % gridSize; y < canvas.height + gridSize; y += gridSize) {
				ctx.beginPath();
				ctx.moveTo(0, y);
				ctx.lineTo(canvas.width, y);
				ctx.strokeStyle = gridColor;
				ctx.lineWidth = 2.5;
				ctx.stroke();
			}

			offsetX -= Math.min(Math.max(Math.sin(Date.now() / 10000), -0.2), 0.2);
			offsetY += 0.2;

			requestAnimationFrame(drawGrid);
		}

		drawGrid();

		window.addEventListener('resize', () => {
			canvas.width = window.innerWidth + 25;
			canvas.height = window.innerHeight + 25;
		});

		// Tips translations
		const tipsData = {
			en: {
				"0": "You can check the pulse of a person if you press R while holding their hand or head",
				"1": "Food speeds up the recovery of stamina and blood",
				"2": "Bandages can be used as a splint",
				"3": "1/5 of a fentanyl syrette is the maximum before the overdose",
				"4": "That funny looking can of food might be something else...",
				"5": "3 painkiller bottles in a short amount of time can lead to a slight overdose",
				"6": "Join our Discord server, it has a lot of useful information",
				"7": "If a person is acting suspicious, it's not really a reason to kill",
				"8": "Reading item descriptions is very useful",
				"9": "Brains are very fragile",
				"10": "All of the available binds exist in the Discord server",
				"11": "\"bind e +use\" you dummy",
				"12": "You can stand up using \"fake\" console command",
				"13": "You don't have to obey an idiot with a gun",
				"14": "Proper medical care increases your karma",
				"15": "The doctor doesn't break ribs during CPR.",
				"16": "Cyanide works better indoors",
				"17": "Don't kick everyone, you'll lose your innocence",
				"18": "Don't forget that there are other traitor classes!",
				"19": "You have a variety of different items when you're the traitor. Check them out, they might be useful",
				"20": "You can bunt with your firearms using E+LMB",
				"21": "Harming others makes you lose your innocence, losing it means others can harm you without losing their karma",
				"22": "Make sure to double tap your enemy",
				"23": "Roleplaying isnt required, but it's nice for a more enjoyable time on the server",
				"24": "Kill yourself in front of everyone for comedy, using \"suicide\" console command",
				"25": "White noise means oxygen deprivation or brain damage",
				"26": "Adrenaline speeds up blood recovery, while also letting you stay conscious for longer even if you have less than 3 litres of blood",
				"27": "Adrenaline numbs the pain for the while, but it will always return after it",
				"28": "The one and only cause of death is brain death",
				"29": "Carbon gas will slowly lower your consciousness",
				"30": "Black pixelated noise is the consciousness meter",
				"31": "Karma works differently for police. Shooting someone is only allowed when you're directly threatened by them",
				"32": "It's ok to break a rib or two while doing CPR",
				"33": "You can earn points passively by playing the game, but you can also donate :3",
				"34": "Inspect your weapon to see how many bullets you have left"
			},
			ru: {
				"0": "Можно проверить пульс тела, если нажать R, пока держишь кисть или голову",
				"1": "Еда ускоряет восстановление стамины и крови",
				"2": "Бинты можно использовать как шину",
				"3": "Более 1/5 шприца фентанила могут вызвать передоз",
				"4": "Если Вы увидели банку шпротов, то, возможно, ошибаетесь...",
				"5": "3 бутыля обезболивающих за короткое время могут привести к передозу",
				"6": "Вступайте в наш дискорд сервер, в нем много полезной информации",
				"7": "Если человек ведет себя подозрительно, это не совсем причина для убийства",
				"8": "Читать описание предметов очень полезно",
				"9": "Мозг - достаточно хрупкий орган",
				"10": "Все бинды можно найти в дискорд сервере",
				"11": "\"bind e +use\", не тупи",
				"12": "При помощи консольной команды \"fake\" можно встать",
				"13": "ЛЯГ",
				"14": "Правильная медицинская помощь повышает твою карму",
				"15": "Доктор не ломает рёбра при СЛР",
				"16": "Цианид работает в закрытых помещениях лучше всего",
				"17": "Не пинай всех подряд, ты потеряешь невиновность",
				"18": "Не забывай про остальные классы трейтора - разнообразие украшает игру",
				"19": "У тебя есть большое количество предметов, когда ты играешь за трейтора. Используй их всех во всю",
				"20": "Иногда лучше ударить прикладом, чем стрелять",
				"21": "Причинение вреда другим сделает вас агрессором, а это уже означает, что другие могут причинить вам вред, не потеряв кармы",
				"22": "Не забывай давать контрольный",
				"23": "Ролевая игра не требуется, но это делает игру интереснее",
				"24": "Застрелись в толпе, ради комедического эффекта (\"suicide\" в консоль)",
				"25": "Белый шум может значить нехватку кислорода или травму мозга",
				"26": "Адреналин ускоряет восстановление крови, а также позволяет дольше оставаться в сознании, даже если у вас осталось менее 3 литров крови",
				"27": "Адреналин на время притупляет боль, но она всё равно вернётся позже",
				"28": "Единственной причиной смерти является смерть мозга",
				"29": "Угарный газ постепенно будет понижать ваше сознание",
				"30": "Черный пикселированный шум - индикатор уровня сознания",
				"31": "Для полицейских карма работает по-другому. Стрельба для них разрешена только в том случае, если кто-то напрямую им угрожает",
				"32": "Человек не дышит? Проведите сердечно-легочную реанимацию. Ничего страшного, если сломаете одно или два ребра",
				"33": "В игре можно пассивно зарабатывать очки, которые затем можно использовать в поинтшопе",
				"34": "Осмотр оружия позволяет узнать количество патронов в нём"
			}
		};

		// Фоновая музыка - автоматическое воспроизведение
		function initBackgroundMusic() {
			const audio = document.getElementById('bg-music');
			
			// Пытаемся установить реальный URL музыки
			// В оригинале используется ambient трек из игры
			const musicUrl = 'https://cdn.discordapp.com/attachments/1191004791023288410/1201108071570677790/ambient_occlusion_3.mp3';
			
			// Создаем новый audio элемент, если нужно
			if (audio) {
				audio.src = musicUrl;
			} else {
				const newAudio = document.createElement('audio');
				newAudio.id = 'bg-music';
				newAudio.loop = true;
				newAudio.preload = 'auto';
				newAudio.style.display = 'none';
				newAudio.src = musicUrl;
				document.body.appendChild(newAudio);
			}
			
			// Функция попытки воспроизведения
			function playMusic() {
				const music = document.getElementById('bg-music');
				if (music) {
					music.volume = 0.3; // Комфортная громкость
					music.play().catch(e => {
						console.log('Автовоспроизведение заблокировано браузером, ждем взаимодействия');
						// Пробуем снова при любом взаимодействии с страницей
						const playOnInteraction = () => {
							music.play().catch(console.error);
							document.removeEventListener('click', playOnInteraction);
							document.removeEventListener('touchstart', playOnInteraction);
							document.removeEventListener('keydown', playOnInteraction);
						};
						document.addEventListener('click', playOnInteraction);
						document.addEventListener('touchstart', playOnInteraction);
						document.addEventListener('keydown', playOnInteraction);
					});
				}
			}
			
			// Пытаемся воспроизвести сразу
			playMusic();
		}

		// Запускаем музыку после загрузки страницы
		window.addEventListener('load', initBackgroundMusic);

		// Tips functionality
		let currentLang = navigator.language;
		const changingText = document.getElementById('text_tips');
		
		function SelectTip() {
			const lang = (currentLang === 'ru-RU' || currentLang === 'ru') ? 'ru' : 'en';
			const translationData = tipsData[lang];
			
			if (translationData) {
				const keys = Object.keys(translationData);
				const key = keys[Math.floor(Math.random() * keys.length)];
				changingText.textContent = translationData[key];
			}
		}
		
		function changeText() {
			changingText.style.opacity = 0;
			changingText.addEventListener('transitionend', function handleTransitionEnd() {
				changingText.style.opacity = 1;
				SelectTip();
				startThink();
				changingText.removeEventListener('transitionend', handleTransitionEnd);
			});
		}

		function startThink() {
			setTimeout(changeText, 12000);
		}
		
		setTimeout(changeText, 500);

		// GameDetails function
		const infoText = document.getElementById('info');
		const mapText = document.getElementById('map');
		
		function GameDetails(servername, serverurl, mapname, maxplayers, steamid, gamemode, volume, language) {
			if (servername && servername.split("|").length > 2) {
				infoText.textContent = servername.split("|")[2].trim();
			}
			mapText.textContent = "On map: " + (mapname || "");
			currentLang = language || currentLang;
		}
	</script>
</body>
</html>
